<<<<<<< HEAD
var destinations = {
  beach: {
    0: {
=======
var destinationCode;

var departureDate = moment();
var activity;
var destinations = {
  beach: [
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Rio de Janeiro",
      airportCode: "GIG",
      country: "Brazil",
      countryCode: "BR"
    },
<<<<<<< HEAD
    1: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Tel Aviv",
      airportCode: "TLV",
      country: "Israel",
      countryCode: "IL"
    },
<<<<<<< HEAD
    2: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Paros",
      airportCode: "PAS",
      country: "Greece",
      countryCode: "GR"
    },
<<<<<<< HEAD
    3: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Ko Samui",
      airportCode: "USM",
      country: "Thailand",
      countryCode: "TH"
    },
<<<<<<< HEAD
    4: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Olbia",
      airportCode: "OLB",
      country: "Italy",
      countryCode: "IT"
    }
<<<<<<< HEAD
  },
  hiking: {
    0: {
=======
  ],
  hiking: [
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Okutama",
      airportCode: "HND",
      country: "Japan",
      countryCode: "JP"
    },
<<<<<<< HEAD
    1: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Garmisch-Partenkirchen",
      airportCode: "MUC",
      country: "Germany",
      countryCode: "DE"
    },
<<<<<<< HEAD
    2: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Grand Canyon",
      airportCode: "GCN",
      country: "United States",
      countryCode: "US"
    },
<<<<<<< HEAD
    3: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Vancouver",
      airportCode: "YVR",
      country: "Canada",
      countryCode: "CA"
    },
<<<<<<< HEAD
    4: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Mount Cook",
      airportCode: "MON",
      country: "New Zeland",
      countryCode: "NZ"
    }
<<<<<<< HEAD
  },
  party: {
    0: {
=======
  ],
  party: [
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Berlin",
      airportCode: "TXL",
      country: "Germany",
      countryCode: "DE"
    },
<<<<<<< HEAD
    1: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Ibiza",
      airportCode: "IBZ",
      country: "Spain",
      countryCode: "ES"
    },
<<<<<<< HEAD
    2: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Barcelona",
      airportCode: "BCN",
      country: "Spain",
      countryCode: "ES"
    },
<<<<<<< HEAD
    3: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "New York",
      airportCode: "JFK",
      country: "United States",
      countryCode: "US"
    },
<<<<<<< HEAD
    4: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Mykonos",
      airportCode: "JMK",
      country: "Greece",
      countryCode: "GR"
    }
<<<<<<< HEAD
  },
  sightseeing: {
    0: {
=======
  ],
  sightseeing: [
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "London",
      airportCode: "LHR",
      country: "England",
      countryCode: "GB"
    },
<<<<<<< HEAD
    1: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Madrid",
      airportCode: "MAD",
      country: "Spain",
      countryCode: "ES"
    },
<<<<<<< HEAD
    2: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Rome",
      airportCode: "FCO",
      country: "Italy",
      countryCode: "IT"
    },
<<<<<<< HEAD
    3: {
      name: "Hong Kong",
      airportCode: "HKG",
      country: "China",
      countryCode: "HK"
    },
    4: {
=======
    {
      name: "Hong Kong",
      airportCode: "HKG",
      country: "Hong Kong",
      countryCode: "HK"
    },
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Tokyo",
      airportCode: "HND",
      country: "Japan",
      countryCode: "JP"
    }
<<<<<<< HEAD
  },
  ski: {
    0: {
=======
  ],
  ski: [
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Niseko",
      airportCode: "CTS",
      country: "Japan",
      countryCode: "JP"
    },
<<<<<<< HEAD
    1: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Zermatt",
      airportCode: "SIR",
      country: "Switzerland",
      countryCode: "CH"
    },
<<<<<<< HEAD
    2: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "La Clusaz",
      airportCode: "GVA",
      country: "France",
      countryCode: "FR"
    },
<<<<<<< HEAD
    3: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Sankt Anton am Arlberg",
      airportCode: "INN",
      country: "Austria",
      countryCode: "AT"
    },
<<<<<<< HEAD
    4: {
=======
    {
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
      name: "Revelstoke",
      airportCode: "YLW",
      country: "Canada",
      countryCode: "CA"
    }
<<<<<<< HEAD
  }
};

$(".callout").on("click", function() {
  var activity = $(this).attr("activity");
=======
  ]
};

departureDate.add(1, "days");
departureDate = departureDate.format("YYYY-MM-DD");

$(".callout").on("click", function() {
  activity = $(this).attr("js-activity");
>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
  var cities = destinations[activity];
  document.body.innerHTML = "";

  var container = document.createElement("div");
<<<<<<< HEAD
  container.setAttribute("class", "container");
  document.body.append(container);

  for (const key in cities) {
    if (cities.hasOwnProperty(key)) {
      const element = cities[key];
      var city = element.name;
      var country = element.countryCode;
      // This is our API key
      var APIKey = "166a433c57516f51dfab1f7edaed8413";
      // Here we are building the URL we need to query the database
      var queryURL =
        "https://api.openweathermap.org/data/2.5/forecast?" +
        "q=" +
        city +
        "," +
        country +
        "&units=metric&appid=" +
        APIKey;
      // Here we run our AJAX call to the OpenWeatherMap API
      $.ajax({
        url: queryURL,
        method: "GET"
      })
        // We store all of the retrieved data inside of an object called "response"
        .then(function(response) {
          var city = response.city.name;
          var country = response.city.country;
          var list = response.list;
          var hours = {};
          var dates = [];
          var cityWeather = {
            city: city,
            country: country,
            day: {}
          };
          var flagUrl =
            "assets/images/countries/" +
            cityWeather.country.toLowerCase() +
            ".svg";

          for (let index = 0; index < list.length; index++) {
            const element = list[index];
            var time = element["dt_txt"];
            var date = time.substring(0, 10);
            var hour = time.substring(11, 16);
            var temp = element.main.temp;
            var weather = element.weather[0].description;
            var iconUrl =
              "http://openweathermap.org/img/wn/" +
              element.weather[0].icon +
              "@2x.png";
            hours[hour] = [temp, weather, iconUrl];
            dates.push(date);
            if (dates[index] != dates[index - 1]) {
              hours = {};
            }
            cityWeather.day[date] = hours;
          }

          var div = document.createElement("div");
          div.setAttribute("class", "city");
          div.setAttribute("city", cityWeather.city);
          container.append(div);
          var table = document.createElement("table");
          table.setAttribute("class", "city-tbl");
          div.append(table);
          var titleRow = document.createElement("tr");
          titleRow.setAttribute("class", "cityTbl-titleRow");
          table.append(titleRow);
          var cityTitle = document.createElement("td");
          cityTitle.setAttribute("class", "cityTitle-td");
          titleRow.append(cityTitle);
          var cityFlag = document.createElement("td");
          cityFlag.setAttribute("class", "cityFlag-td");
          titleRow.append(cityFlag);
          var title = document.createElement("h1");
          title.setAttribute("class", "cityTitle-h1");
          title.textContent = cityWeather.city;
          cityTitle.append(title);
          var flagImg = document.createElement("img");
          flagImg.setAttribute("src", flagUrl);
          flagImg.setAttribute("class", "flag");
          cityFlag.append(flagImg);

          for (const key in cityWeather.day) {
            if (cityWeather.day.hasOwnProperty(key)) {
              const element = cityWeather.day[key];
              var dayTable = document.createElement("table");
              dayTable.setAttribute("class", "day-tbl");
              table.append(dayTable);
              var dayHead = document.createElement("thead");
              dayHead.setAttribute("class", "dayTbl-head");
              dayTable.append(dayHead);
              var day = document.createElement("h2");
              day.setAttribute("class", "dayTitle-h2");
              day.textContent = key;
              dayHead.append(day);

              for (const hourKey in element) {
                if (element.hasOwnProperty(hourKey)) {
                  const hourElement = element[hourKey];
                  var hourRow = document.createElement("tr");
                  hourRow.setAttribute("class", "hour-row");
                  dayTable.append(hourRow);
                  var hourTd = document.createElement("td");
                  hourTd.setAttribute("class", "hour-td");
                  var tempTd = document.createElement("td");
                  tempTd.setAttribute("class", "temp-td");
                  var weatherTd = document.createElement("td");
                  weatherTd.setAttribute("class", "weather-td");
                  var iconTd = document.createElement("td");
                  iconTd.setAttribute("class", "icon-td");
                  hourRow.append(hourTd);
                  hourRow.append(tempTd);
                  hourRow.append(weatherTd);
                  hourRow.append(iconTd);
                  var displayHour = document.createElement("h3");
                  displayHour.setAttribute("class", "hour-h3");
                  var displayTemp = document.createElement("h3");
                  displayTemp.setAttribute("class", "temp-h3");
                  var weatherDescription = document.createElement("h3");
                  weatherDescription.setAttribute("class", "description-h3");
                  var weatherIcon = document.createElement("img");
                  weatherIcon.setAttribute("class", "weather-icon");
                  displayHour.textContent = hourKey;
                  displayTemp.textContent = hourElement[0] + "°C";
                  weatherDescription.textContent = hourElement[1];
                  weatherIcon.setAttribute("src", hourElement[2]);
                  hourTd.append(displayHour);
                  tempTd.append(displayTemp);
                  weatherTd.append(weatherDescription);
                  iconTd.append(weatherIcon);
                }
              }
            }
          }
        });
    }
  }
});
=======
  $(container).attr("class", "container row small-up-1 medium-up-2 large-up-3");
  $("body").append(container);

  cities.forEach(activity => {
    var city = activity.name,
      country = activity.countryCode;
    // This is our API key
    var APIKey = "166a433c57516f51dfab1f7edaed8413";
    // Here we are building the URL we need to query the database
    var queryURL =
      "https://api.openweathermap.org/data/2.5/forecast?" +
      "q=" +
      city +
      "," +
      country +
      "&units=metric&appid=" +
      APIKey;

    // Here we run our AJAX call to the OpenWeatherMap API
    $.ajax({
      url: queryURL,
      method: "GET"
    })
      // We store all of the retrieved data inside of an object called "response"
      .then(function(response) {
        var city = response.city.name;
        var country = response.city.country;
        var list = response.list;
        var hours = {};
        var dates = [];
        var cityWeather = {
          city: city,
          country: country,
          day: {}
        };
        var flagUrl =
          "assets/images/countries/" +
          cityWeather.country.toLowerCase() +
          ".svg";

        for (let index = 0; index < list.length; index++) {
          const element = list[index];
          var time = element["dt_txt"];
          var date = time.substring(0, 10);
          var hour = time.substring(11, 16);
          var temp = element.main.temp;
          var weather = element.weather[0].description;
          var iconUrl =
            "http://openweathermap.org/img/wn/" +
            element.weather[0].icon +
            "@2x.png";
          hours[hour] = [temp, weather, iconUrl];
          dates.push(date);
          if (dates[index] != dates[index - 1]) {
            hours = {};
          }
          cityWeather.day[date] = hours;
        }

        container.innerHTML += `
        <div class="city column" city="${city}">
          <table class="city-tbl">
              <tr class="cityTbl-titleRow">
                <td class="cityTitle-td">
                  <h1 class="cityTitle-h1">${city}</h1>
                </td>
                <td class="cityFlag-td">
                  <img src="${flagUrl}" class="flag">
                </td>
              </tr>

            ${Object.keys(cityWeather.day)
              .map(key => {
                return `
                    <table class="day-Tbl">
                      <tr class="dayTitle-tr">
                        <th class="dayTitle-td">
                          <h2 class="dayTitle-h2">${key}</h2>
                        </th>
                      </tr>

                      ${Object.keys(cityWeather.day[key])
                        .map(hourKey => {
                          return `
                              <tr class="hour-row">
                                <td class="hour-td">
                                  <h3 class="hour-h3">${hourKey}</h3>
                                </td>
                                <td class="temp-td">
                                  <h3 class="temp-h3">${
                                    cityWeather.day[key][hourKey][0]
                                  } °C</h3>
                                </td>
                                <td class="weather-td">
                                  <h3 class="description-h3">${
                                    cityWeather.day[key][hourKey][1]
                                  }</h3>
                                </td>
                                <td class="icon-td">
                                  <img class="weather-icon" src="${
                                    cityWeather.day[key][hourKey][2]
                                  }">
                                </td>
                              </tr>`;
                        })
                        .join("")}
                    </table>`;
              })
              .join("")}
          </table>
        </div>
    `;
      });
  });
});

$(document).on("click", ".city", function() {
  destination = $(this).attr("city");
  if (typeof destination !== "undefined") {
    document.body.innerHTML = `
      <h1>Choose one flight option</h1>
      <div class="row">
        <div class="columns">
          <h2>Flights List
            <img id="airplaneIcon" src="assets/images/airplaneIcon.png"></h2>
        </div>
      </div> 
      <ul
      class="accordion flights-list"
      data-accordion="157mt1-accordion"
      data-allow-all-closed="true"
      role="tablist">
      </ul>          
    `;
    destinations[activity].forEach(element => {
      if (element.name === destination) {
        destinationCode = element.airportCode;
      }
    });
    trip();
  }
});

>>>>>>> 52f03e356f7416201b0a3cb362e844a4e27c989b
